<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax-post</title>
</head>
<script>
    window.onload = function(e) {
        var oBtn = document.querySelector("button");
        var encode = encodeURIComponent("张三")
        console.log(encode)
        oBtn.onclick = function(e1) {
            //1.创建一个异步对象
            let xmlhttp = new XMLHttpRequest();

            //2.设置请求方式和请求地址
            /*
            method：请求的类型；GET 或 POST
            url：文件在服务器上的位置
            async：true（异步）或 false（同步）
            */
            console.log(new Date().getTime())
            console.log(Date.now())

            xmlhttp.open("POST", "ajax-post.php", true);

            //注意点：这句代码必须放在open和send之间
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            //3.发送请求
            xmlhttp.send("userName=xdd&userPwd=197");

            //4.监听状态的变化
            xmlhttp.onreadystatechange = function(e2) {
                /*readyState
                每当 readyState 改变时，就会触发 onreadystatechange 事件。

                readyState 属性存有 XMLHttpRequest 的状态信息。
                0: 请求未初始化
                1: 服务器连接已建立
                2: 请求已接收
                3: 请求处理中
                4: 请求已完成，且响应已就绪
                */
                if (xmlhttp.readyState === 4) { //现在我请求了
                    /*当能响应回来才说明这次请求成功
                        status
                    */
                    if (xmlhttp.status >= 200 && xmlhttp.status < 300 || xmlhttp.status === 304) {
                        //5.处理返回的结果
                        // console.log("接收到服务器返回的数据");
                        console.log(xmlhttp.responseText)

                    } else {
                        console.log("没有接收到服务器返回的数据");


                    }

                }

            }


        }
    }
</script>

<body>

    <button>发送请求</button>

</body>

</html>